{% extends "base/base.html" %}

{% block extra_style %}
	<script src = "https://code.highcharts.com/highcharts.js"></script>
{% endblock %}

{% block content %}
	<div id = "container" style = "width: 550px; height: 400px; margin: 0 auto"></div>
	<script>
		var xhr = new XMLHttpRequest();
		xhr.open('GET', '/test-data/');
		xhr.onload = function() {
			if (xhr.status === 200) {
				var data = JSON.parse(xhr.responseText);
				for (let index = 0; index < data.data.length; index++) {
					console.log(Date.UTC(data.data[index][0]));
				}
				
				chart = {
					chart: {
						type: 'scatter',
						zoomType: 'x'
					},
					title: {
					   text: 'Glucose Values for 3/10/2021'   
					},
					xAxis: {
					   type: 'datetime',
					   title: {
						  enabled: true,
						  text: 'Time'
					   },
					   //min: data.min,
					   //max: data.max,
					   
					},
					yAxis: {
					   title: {
						  text: 'Glucose (mg/dL)'
					   },
					   min:40,
					   max:400
					},
					
					scrollbar: {
						enabled: true
					},
					
					plotOptions: {
					   scatter: {
						  marker: {
							 radius: 5,
							 states: {
								hover: {
								   enabled: true,
								   lineColor: 'rgb(100,100,100)'
								}
							 }
						  },
						  states: {
							 hover: {
								marker: {
								   enabled: false
								}
							 }
						  },
						  tooltip: {
							 headerFormat: '',
							 pointFormat: '{point.x}, {point.y} mg/dL'
						  }
					   }
					},
					series: [
					   {
						  color: 'rgba(223, 83, 83, .5)',
						  data: data.data
					   }
					]
					
				};
				console.log(data.data)
				Highcharts.chart('container', chart);
			}
			else {
				alert('Request failed.  Returned status of ' + xhr.status);
			}
		};
		xhr.send();
		
		
	</script>
{% endblock %}